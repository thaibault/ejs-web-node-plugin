"use strict";if("undefined"!=typeof module&&null!==module&&"undefined"!==eval("typeof require")&&null!==eval("require")&&"main"in eval("require")&&"undefined"!==eval("typeof require.main")&&null!==eval("require.main")){var ORIGINAL_MAIN_MODULE=module;module!==eval("require.main")&&"paths"in module&&"paths"in eval("require.main")&&"undefined"!=typeof __dirname&&null!==__dirname&&(module.paths=eval("require.main.paths").concat(module.paths.filter((function(path){return eval("require.main.paths").includes(path)}))))}if(null==window)var window="undefined"==typeof global||null===global?{}:global;!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("@babel/runtime/helpers/construct"),require("@babel/runtime/helpers/asyncToGenerator"),require("@babel/runtime/helpers/extends"),require("@babel/runtime/regenerator"),require("clientnode"),require("ejs"),require("fs/promises"),require("fs"),require("path"));else if("function"==typeof define&&define.amd)define(["@babel/runtime/helpers/construct","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/helpers/extends","@babel/runtime/regenerator","clientnode","ejs","fs/promises","fs","path"],r);else{var t="object"==typeof exports?r(require("@babel/runtime/helpers/construct"),require("@babel/runtime/helpers/asyncToGenerator"),require("@babel/runtime/helpers/extends"),require("@babel/runtime/regenerator"),require("clientnode"),require("ejs"),require("fs/promises"),require("fs"),require("path")):r(e["@babel/runtime/helpers/construct"],e["@babel/runtime/helpers/asyncToGenerator"],e["@babel/runtime/helpers/extends"],e["@babel/runtime/regenerator"],e.clientnode,e.ejs,e["fs/promises"],e.fs,e.path);for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(this,((e,r,t,n,a,s,i,o,c)=>(()=>{var l=[(e,r,t)=>{t.r(r),t.d(r,{UTILITY_SCOPE:()=>w,default:()=>T,getEntryFiles:()=>q,postConfigurationHotLoaded:()=>k,preLoadService:()=>F,render:()=>E,renderFactory:()=>S,shouldExit:()=>P,template:()=>O});var n=t(1),a=t.n(n),s=t(2),i=t.n(s),o=t(3),c=t.n(o),l=t(4),u=t.n(l),p=t(5),d=t(6),f=t.n(d),m=t(7),b=t.n(m),h=t(8),v=t.n(h),x=t(9),y=t.n(x);function g(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return j(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}e=t.hmd(e);var w=c()({},p.UTILITY_SCOPE,{fileSystemUtility:p.UTILITY_SCOPE.filesystem});delete w.filesystem;var k=function(){var e=i()(u().mark((function e(r){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.configuration.ejs.renderAfterConfigurationUpdates||null==(t=r.services.ejs)||!t.render){e.next=1;break}return e.next=1,r.services.ejs.render(r);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=i()(u().mark((function e(r){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.configuration.ejs,(n=r.services).ejs={entryFiles:null,templates:{},getEntryFiles:q,render:E,renderFactory:S},!t.renderAfterConfigurationUpdates){e.next=1;break}return e.next=1,n.ejs.render(r);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=i()(u().mark((function e(r){var t,n,a,s,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.configuration.ejs.locations,(n=r.services).ejs.templates){e.next=1;break}return e.abrupt("return");case 1:a=[].concat(t.inPlaceReplacements),s=[],o=u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l[c],a.includes(r)||s.push(new Promise((function(e,t){var n=r.substring(0,r.length-y().extname(r).length),a=!1;i()(u().mark((function r(){var s,i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=1,(0,p.isFile)(n);case 1:a=r.sent,r.next=3;break;case 2:r.prev=2,s=r.catch(0),t(s);case 3:if(!a){r.next=8;break}return r.prev=4,r.next=5,(0,m.unlink)(n);case 5:e(!0),r.next=7;break;case 6:r.prev=6,i=r.catch(4),t(i);case 7:r.next=9;break;case 8:e(!1);case 9:case"end":return r.stop()}}),r,null,[[0,2],[4,6]])})))()})));case 1:case"end":return e.stop()}}),e)})),c=0,l=Object.keys(n.ejs.templates);case 2:if(!(c<l.length)){e.next=4;break}return e.delegateYield(o(),"t0",3);case 3:c++,e.next=2;break;case 4:return e.next=5,Promise.all(s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=i()(u().mark((function e(r){var t,n,a,s,i,o,c,l,d,f,m,b,h,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.configuration,n=r.plugins,a=r.pluginAPI,!(s=r.services.ejs).entryFiles||t.ejs.reloadEntryFiles){e.next=1;break}return e.abrupt("return",s.entryFiles);case 1:i=[].concat(t.ejs.extensions),s.entryFiles=new Set,o=g(a.determineLocations(t,t.ejs.locations.include));case 2:if((c=o()).done){e.next=4;break}return l=c.value,e.next=3,(0,p.walkDirectoryRecursively)(l,(function(e){var r,o;return!(e.name.startsWith(".")||a.isInLocations(t,n,e.path,t.ejs.locations.exclude))&&void(null!=(r=e.stats)&&r.isFile()&&i.some((function(r){return e.name.endsWith(r)}))&&(null==(o=s.entryFiles)||o.add(e.path)))}));case 3:e.next=2;break;case 4:for(d=g([].concat(t.ejs.locations.inPlaceReplacements));!(f=d()).done;)m=f.value,s.entryFiles.add(m);for(b=g(s.entryFiles);!(h=b()).done;)v=h.value,s.templates[v]=null;return e.abrupt("return",s.entryFiles);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=i()(u().mark((function e(r){var t,n,a,s,o,l,d,m,h,x,j,k,F,P,q,E,S,T,_,I,C,A,U,R,L,M,G,N,Y,$,D;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=(t=r).configuration,a=t.data,s=t.pluginAPI,o=t.plugins,l=t.services,d=(0,p.extend)(!0,{basePath:n.core.context.path},n.ejs.scope.plain,(null==a?void 0:a.scope)||{}),m=process.cwd(),h=new Date,x=(0,p.getUTCTimestamp)(h),j=g(["evaluation","execution"]);!(k=j()).done;)for(F=k.value,P=n.ejs.scope[F],q=0,E=Object.entries(P);q<E.length;q++)S=E[q],T=S[0],_=S[1],I=c()({},w,{configuration:n,currentPath:m,fileSystem:b(),now:h,nowUTCTimestamp:x,parser:f(),path:y(),pluginAPI:s,plugins:o,scope:d,synchronousFileSystem:v(),template:O,webNodePath:"/"}),(C=(0,p.evaluate)(_,I,"execution"===F)).error||(d[T]=C.result);if(N=c(),Y={},$=r,D=null==a?void 0:a.entryFiles){e.next=2;break}return e.next=1,l.ejs.getEntryFiles(r);case 1:D=e.sent;case 2:return r=N(Y,$,{data:{entryFiles:D,scope:d},hook:"preEjsRender"}),e.next=3,s.callStack(r);case 3:A=e.sent,d=A.scope,l.ejs.entryFiles=A.entryFiles,U=[].concat(n.ejs.locations.inPlaceReplacements),R=[],L=u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=G.value,R.push(new Promise((function(e,t){var a=c()({},d),s=U.includes(r),f=s?r:r.substring(0,r.length-y().extname(r).length);i()(u().mark((function i(){var d,m,h,v,x,g,j;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(v=s&&n.ejs.cacheInPlaceReplacements){i.next=3;break}if(!(x=!s&&n.ejs.cache)){i.next=2;break}return i.next=1,(0,p.isFile)(f);case 1:x=i.sent;case 2:v=x;case 3:if(!v){i.next=4;break}e(f),i.next=14;break;case 4:d=c()({},(0,p.copy)(n.ejs.options),{filename:y().relative(a.basePath,r)}),Object.prototype.hasOwnProperty.call(a,"options")||(a.options=d),Object.prototype.hasOwnProperty.call(a,"plugins")||(a.plugins=o),m=l.ejs.renderFactory(l,n,a,d),h="",i.prev=5,h=m(r),i.next=8;break;case 6:if(i.prev=6,g=i.catch(5),!s){i.next=7;break}return e(f),i.abrupt("return");case 7:throw g;case 8:if(!h){i.next=13;break}return i.prev=9,i.next=10,b().writeFile(f,h,{encoding:n.core.encoding,flag:"w",mode:438});case 10:e(f),i.next=12;break;case 11:i.prev=11,j=i.catch(9),t(j);case 12:i.next=14;break;case 13:e(f);case 14:case"end":return i.stop()}}),i,null,[[5,6],[9,11]])})))()})));case 1:case"end":return e.stop()}}),e)})),M=g(l.ejs.entryFiles);case 4:if((G=M()).done){e.next=6;break}return e.delegateYield(L(),"t0",5);case 5:e.next=4;break;case 6:return e.next=7,Promise.all(R);case 7:return e.next=8,s.callStack(c()({},r,{hook:"postEjsRender"}));case 8:return e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e,r,t,n){void 0===t&&(t={}),void 0===n&&(n={}),t.basePath||(t.basePath=r.core.context.path),n.preCompiledTemplateFileExtensions||(n.preCompiledTemplateFileExtensions=[".js"]),n.encoding||(n.encoding="utf-8");var s=[].concat(r.ejs.locations.inPlaceReplacements);return function(i,o){void 0===o&&(o={});var l=(0,p.copy)(n);delete l.client,l=(0,p.extend)(!0,l,o.options||{}),i=y().resolve(t.basePath,i),l.filename=y().relative(t.basePath,i);var u=c()({},t);u.basePath=y().dirname(i),u.options=l,u.scope=u,(0,p.extend)(u,o),u.include=e.ejs.renderFactory(e,r,u,l);for(var d,m,b=Object.keys(u),h=b.map((function(e){return(0,p.convertToValidVariableName)(e)})),x=null,j=g([""].concat(r.ejs.extensions));!(d=j()).done;)if(m=d.value,(0,p.isFileSync)(i+m)){x=i+m;break}if(x){var w,k,F=!(null!=(w=l.preCompiledTemplateFileExtensions)&&w.includes(y().extname(x))||l._with);if(l._with&&(l.strict=!1),r.ejs.reloadSourceContent&&!s.includes(i)||!Object.prototype.hasOwnProperty.call(e.ejs.templates,x)||!e.ejs.templates[x])if(null!=(k=l.preCompiledTemplateFileExtensions)&&k.includes(y().extname(x)))try{e.ejs.templates[x]=(0,p.currentRequire)(x)}catch(e){throw new Error('Error occurred during loading script module: "'+x+'": '+(0,p.represent)(e))}else{var P;try{P=v().readFileSync(x,{encoding:l.encoding})}catch(e){throw new Error('Error occurred during loading template file "'+x+'" from file system: '+(0,p.represent)(e))}l._with||(l.client=!0);try{if(e.ejs.templates[x]=f().compile(P,l),!l._with){for(var q,E,S=l.localsName||"scope";h.includes(S);)S="_"+S;e.ejs.templates[x]=a()(Function,h.concat([S,"return "+(null!==(q=null==(E=e.ejs.templates[x])?void 0:E.toString())&&void 0!==q?q:'""')+"("+S+","+S+".escapeFn,"+S+".include,"+S+".rethrow)"]))}}catch(e){throw new Error('Error occurred during compiling template file "'+x+'" with base path "'+u.basePath+'": '+(0,p.represent)(e))}}var O="";try{var T;O=F?(T=e.ejs.templates)[x].apply(T,b.map((function(e){return u[e]})).concat(l._with?[]:u)):e.ejs.templates[x](u,u.escapeFn,u.include)}catch(e){var _="";try{1e3<(_=(0,p.represent)(u)).length&&(_=_.substring(0,997)+"..."),_=" scope "+_+" against"}catch(e){}throw new Error("Error occurred during running template"+_+' file "'+x+'": '+(0,p.represent)(e))}return O.replace(/<script +processing-workaround *(?:= *(?:" *"|' *') *)?>([\s\S]*?)<\/ *script *>/gi,"$1").replace(/<script +processing(-+)-workaround *(?:= *(?:" *"|' *') *)?>([\s\S]*?)<\/ *script *>/gi,"<script processing$1workaround>$2<\/script>")}throw new Error('Given template file "'+l.filename+'" couldn\'t be resolved (with known extensions: "'+[""].concat(r.ejs.extensions).join('", "')+'}")'+(t.basePath?' "'+t.basePath+'"':"")+".")}},O=e.exports;const T=O},r=>{r.exports=e},e=>{e.exports=r},e=>{e.exports=t},e=>{e.exports=n},e=>{e.exports=a},e=>{e.exports=s},e=>{e.exports=i},e=>{e.exports=o},e=>{e.exports=c}],u={};function p(e){var r=u[e];if(void 0!==r)return r.exports;var t=u[e]={id:e,loaded:!1,exports:{}};return l[e](t,t.exports,p),t.loaded=!0,t.exports}return p.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return p.d(r,{a:r}),r},p.d=(e,r)=>{for(var t in r)p.o(r,t)&&!p.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},p.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),p.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p(0)})()));